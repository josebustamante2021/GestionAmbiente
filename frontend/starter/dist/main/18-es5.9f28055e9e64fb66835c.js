!function(){function c(c,e){if(!(c instanceof e))throw new TypeError("Cannot call a class as a function")}function e(c,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(c,t.key,t)}}function i(c,i,t){return i&&e(c.prototype,i),t&&e(c,t),c}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{qgoE:function(e,t,o){"use strict";o.r(t),o.d(t,"MigracionModule",function(){return ye});var a=o("ofXK"),r=o("3Pt+"),n=o("+0xr"),s=o("M9IT"),l=o("kmnG"),d=o("qFsG"),u=o("dNgK"),m=o("bTqV"),f=o("NFeN"),h=o("d3UM"),p=o("0IaG"),b=o("Dh3D"),v=o("/t3+"),g=o("iadO"),k=o("Qu3c"),j=o("tyNb"),R=o("tSRP"),S=o("vJ2/"),E=o("5EIP"),Z=o("yWYo"),y=o("6QuB"),C=o("tk/3"),A=o("AytR"),X=o("KDUW"),w=o("fXoL");new C.d({"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,POST,OPTIONS,DELETE,PUT"});var P,D=((P=function(){function e(i,t){c(this,e),this.httpClient=i,this.authService=t}return i(e,[{key:"getAll",value:function(){return this.httpClient.get("".concat(A.a.apiUrl,"/migrar/findAll"),{headers:(new C.d).append("Authorization","".concat(this.authService.getToken()))})}},{key:"Inconsistencias",value:function(c){return this.httpClient.post("".concat(A.a.apiUrl,"/migrar/validarInconsistencias"),c,{headers:(new C.d).append("Authorization","".concat(this.authService.getToken()))})}},{key:"replicaGetAll",value:function(){return this.httpClient.get("".concat(A.a.apiUrl,"/migrar/sincronizar/findAll"),{headers:(new C.d).append("Authorization","".concat(this.authService.getToken()))})}},{key:"migrar",value:function(c){return this.httpClient.post("".concat(A.a.apiUrl,"/migrar/procesarMigracion"),c,{headers:(new C.d).append("Authorization","".concat(this.authService.getToken()))})}},{key:"existe",value:function(c){return this.httpClient.post("".concat(A.a.apiUrl,"/migrar/existe"),c,{headers:(new C.d).append("Authorization","".concat(this.authService.getToken()))})}}]),e}()).\u0275fac=function(c){return new(c||P)(w.rc(C.b),w.rc(X.a))},P.\u0275prov=w.ac({token:P,factory:P.\u0275fac}),P),I=o("zbH2"),T=o("PSD3"),x=o.n(T),F=o("4DLd"),$=o("a1LK"),O=o("FKr1"),M=o("bv9b"),z=o("Xa2L"),N=["paginator"],L=["sortTableSort"],V=["paginatorReplica"],B=["sortTableSortReplica"];function H(c,e){1&c&&(w.kc(0,"div",76),w.fc(1,"mat-progress-bar",77),w.jc())}function U(c,e){if(1&c&&(w.kc(0,"mat-option",78),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Ec("value",i),w.Rb(1),w.bd("",i.descripcion," ")}}function q(c,e){if(1&c&&(w.kc(0,"mat-option",78),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Ec("value",i.semestre),w.Rb(1),w.bd("",i.descripcion," ")}}function G(c,e){if(1&c){var i=w.lc();w.kc(0,"div",18),w.kc(1,"mat-form-field",19),w.kc(2,"mat-label"),w.Zc(3,"Semestre"),w.jc(),w.kc(4,"mat-select",79),w.uc("valueChange",function(c){return w.Qc(i),w.yc().selectedSemestre=c})("selectionChange",function(){return w.Qc(i),w.yc().listaCiclos()}),w.Xc(5,q,2,2,"mat-option",21),w.jc(),w.jc(),w.jc()}if(2&c){var t=w.yc();w.Rb(4),w.Ec("value",t.selectedSemestre),w.Rb(1),w.Ec("ngForOf",t.semestres)}}function _(c,e){if(1&c&&(w.kc(0,"mat-option",78),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Ec("value",i.annoProceso),w.Rb(1),w.bd("",i.annoProceso," ")}}function K(c,e){if(1&c&&(w.kc(0,"div",18),w.kc(1,"mat-form-field",19),w.kc(2,"mat-label"),w.Zc(3,"A\xf1o Proceso"),w.jc(),w.kc(4,"mat-select",80),w.Xc(5,_,2,2,"mat-option",21),w.jc(),w.jc(),w.jc()),2&c){var i=w.yc();w.Rb(5),w.Ec("ngForOf",i.annos)}}function Q(c,e){if(1&c&&(w.kc(0,"mat-option",78),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Ec("value",i.codigo),w.Rb(1),w.cd("",i.codigo," - ",i.descripcion," ")}}function J(c,e){if(1&c&&(w.kc(0,"div",18),w.kc(1,"mat-form-field",19),w.kc(2,"mat-label"),w.Zc(3,"Mes Proceso"),w.jc(),w.kc(4,"mat-select",81),w.Xc(5,Q,2,3,"mat-option",21),w.jc(),w.jc(),w.jc()),2&c){var i=w.yc();w.Rb(5),w.Ec("ngForOf",i.meses)}}function W(c,e){if(1&c&&(w.kc(0,"mat-option",78),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Ec("value",i),w.Rb(1),w.bd("",i.descripcion," ")}}function Y(c,e){if(1&c&&(w.kc(0,"mat-option",78),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Ec("value",i),w.Rb(1),w.bd("",i.descripcion," ")}}function cc(c,e){if(1&c&&(w.kc(0,"mat-option",78),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Ec("value",i),w.Rb(1),w.ad(i.descripcion)}}function ec(c,e){if(1&c&&(w.kc(0,"mat-option",78),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Ec("value",i),w.Rb(1),w.bd("",i.descripcion," ")}}function ic(c,e){if(1&c&&(w.kc(0,"mat-option",78),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Ec("value",i.ciclo),w.Rb(1),w.bd("",i.ciclo," ")}}function tc(c,e){if(1&c&&(w.kc(0,"div",82),w.kc(1,"span",83),w.Zc(2),w.jc(),w.jc()),2&c){var i=w.yc();w.Rb(2),w.ad(i.RegistrosProcesados)}}function oc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," # "),w.jc())}function ac(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.simulacionID," ")}}function rc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Fecha"),w.jc())}function nc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.zc(2,"date"),w.fc(3,"br"),w.Zc(4),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",w.Bc(2,2,i.fecha_convert,"dd/MM/yyyy hh:mm a")," "),w.Rb(3),w.ad(i.usuario)}}function sc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Area "),w.jc())}function lc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.codigoArea," ")}}function dc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Filial "),w.jc())}function uc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.nombreFilial," ")}}function mc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Sede "),w.jc())}function fc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.codigoSede," ")}}function hc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Especialidad "),w.jc())}function pc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.codigoEspecialidad," ")}}function bc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Tipo Ambiente "),w.jc())}function vc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.codigoTipoAmbiente," ")}}function gc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Ciclo "),w.jc())}function kc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.ciclo," ")}}function jc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Semestre "),w.jc())}function Rc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.semestre," ")}}function Sc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," A\xf1o "),w.jc())}function Ec(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.annoProceso," ")}}function Zc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Mes "),w.jc())}function yc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.mesProceso," ")}}function Cc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Estado "),w.jc())}function Ac(c,e){1&c&&(w.kc(0,"div"),w.Zc(1,"PENDIENTE"),w.jc())}function Xc(c,e){1&c&&(w.kc(0,"div"),w.Zc(1,"MIGRADO"),w.jc())}function wc(c,e){if(1&c&&(w.kc(0,"td",85),w.Xc(1,Ac,2,0,"div",86),w.Xc(2,Xc,2,0,"div",86),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.Ec("ngIf",0==i.estado),w.Rb(1),w.Ec("ngIf",1==i.estado)}}function Pc(c,e){1&c&&w.fc(0,"tr",87)}var Dc=function(c){return{primary:c}};function Ic(c,e){1&c&&w.fc(0,"tr",88),2&c&&w.Ec("ngClass",w.Ic(1,Dc,1==e.$implicit.estado))}function Tc(c,e){1&c&&(w.kc(0,"div",89),w.fc(1,"mat-progress-spinner",90),w.jc()),2&c&&(w.Rb(1),w.Ec("diameter",40))}function xc(c,e){if(1&c&&(w.kc(0,"div",91),w.Zc(1," No results "),w.jc()),2&c){var i=w.yc();w.Uc("display",0==(null==i.dataSource?null:i.dataSource.data.length)?"":"none")}}function Fc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," # "),w.jc())}function $c(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.simulacionID," ")}}function Oc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Fecha"),w.jc())}function Mc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.zc(2,"date"),w.fc(3,"br"),w.Zc(4),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",w.Bc(2,2,i.fecha_convert,"dd/MM/yyyy hh:mm a")," "),w.Rb(3),w.ad(i.usuario)}}function zc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Area "),w.jc())}function Nc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.codigoArea," ")}}function Lc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Filial "),w.jc())}function Vc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.nombreFilial," ")}}function Bc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Sede "),w.jc())}function Hc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.codigoSede," ")}}function Uc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Especialidad "),w.jc())}function qc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.codigoEspecialidad," ")}}function Gc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Tipo Ambiente "),w.jc())}function _c(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.codigoTipoAmbiente," ")}}function Kc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Ciclo "),w.jc())}function Qc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.ciclo," ")}}function Jc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Semestre "),w.jc())}function Wc(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.semestre," ")}}function Yc(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," A\xf1o "),w.jc())}function ce(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.annoProceso," ")}}function ee(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Mes "),w.jc())}function ie(c,e){if(1&c&&(w.kc(0,"td",85),w.Zc(1),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.bd(" ",i.mesProceso," ")}}function te(c,e){1&c&&(w.kc(0,"th",84),w.Zc(1," Estado "),w.jc())}function oe(c,e){1&c&&(w.kc(0,"div"),w.Zc(1,"PENDIENTE"),w.jc())}function ae(c,e){1&c&&(w.kc(0,"div"),w.Zc(1,"SINCRONIZADO"),w.jc())}function re(c,e){if(1&c&&(w.kc(0,"td",85),w.Xc(1,oe,2,0,"div",86),w.Xc(2,ae,2,0,"div",86),w.jc()),2&c){var i=e.$implicit;w.Rb(1),w.Ec("ngIf",0==i.estado),w.Rb(1),w.Ec("ngIf",1==i.estado)}}function ne(c,e){1&c&&(w.kc(0,"th",92),w.Zc(1,"Opciones"),w.jc())}function se(c,e){1&c&&w.fc(0,"td",93)}function le(c,e){1&c&&w.fc(0,"tr",87)}function de(c,e){1&c&&w.fc(0,"tr",88),2&c&&w.Ec("ngClass",w.Ic(1,Dc,1==e.$implicit.estado))}function ue(c,e){1&c&&(w.kc(0,"div",89),w.fc(1,"mat-progress-spinner",90),w.jc()),2&c&&(w.Rb(1),w.Ec("diameter",40))}function me(c,e){if(1&c&&(w.kc(0,"div",91),w.Zc(1," No results "),w.jc()),2&c){var i=w.yc();w.Uc("display",0==(null==i.dataSourceReplica?null:i.dataSourceReplica.data.length)?"":"none")}}var fe,he,pe,be=function(){return[5,10,20]},ve=[{path:"",component:(fe=function(){function e(i,t,o,a,r,n,s,l,d,u,m,f,h){c(this,e),this.snackBar=i,this.areaService=t,this.filialService=o,this.especialidadService=a,this.semestreService=r,this.sedeService=n,this.migrarService=s,this.dialog=l,this.fb=d,this.tipoAmbienteService=u,this.authService=m,this.asignacionManualService=f,this.excelService=h,this.procesando=!1,this.time=0,this.selectedAreaStatus=0,this.isSedeFilial=!1,this.isEspecialidad=!1,this.displayedColumns=["simulacionID","fecha_convert","codigoArea","nombreFilial","codigoSede","codigoEspecialidad","codigoTipoAmbiente","ciclo","semestre","annoProceso","mesProceso","estado"],this.displayedColumnsReplica=["simulacionID","fecha_convert","codigoArea","nombreFilial","codigoSede","codigoEspecialidad","codigoTipoAmbiente","ciclo","semestre","annoProceso","mesProceso","estado"],this.idLogin=this.authService.currentUserValue.id_login,this.form=this.createForm(),this.listaTipoAmbiente(),this.listaAnnos(),this.listaMeses()}return i(e,[{key:"createForm",value:function(){return this.fb.group({area:["",[r.q.required]],isSedeFilial:[""],isEspecialidad:[""],semestre:[""],annoProceso:[""],mesProceso:[""],filial:[0],sede:[0],especialidad:[0],tipoAmbiente:[0],ciclo:[0]})}},{key:"listaTipoAmbiente",value:function(){var c=this;this.tipoAmbienteService.getAll().subscribe(function(e){c.tiposAmbiente=null,200==e.status&&(c.tiposAmbiente=e.data)},function(e){c.showNotification("snackbar-danger","Error en la conexion...!!!","bottom","center")})}},{key:"listaAnnos",value:function(){var c=this;this.areaService.annosgetAll().subscribe(function(e){c.annos=null,200==e.status&&(c.annos=e.data)},function(e){c.showNotification("snackbar-danger","Error en la conexion...!!!","bottom","center")})}},{key:"listaMeses",value:function(){var c=this;this.areaService.mesesgetAll().subscribe(function(e){c.meses=null,200==e.status&&(c.meses=e.data)},function(e){c.showNotification("snackbar-danger","Error en la conexion...!!!","bottom","center")})}},{key:"showNotification",value:function(c,e,i,t){this.snackBar.open(e,"",{duration:2e3,verticalPosition:i,horizontalPosition:t,panelClass:c})}},{key:"ngOnInit",value:function(){this.listaAreas(),this.listaFiliales(),this.listaSemestres(),this.loadData(),this.loadDataReplica()}},{key:"listaAreas",value:function(){var c=this;this.selectedArea=null,this.areaService.getAll().subscribe(function(e){c.areas=null,200==e.status&&(c.areas=e.data)})}},{key:"listaFiliales",value:function(){var c=this;this.form.controls.filial.setValue(0),this.selectedFilial=null,this.filialService.getAll().subscribe(function(e){c.filiales=null,200==e.status&&(c.filiales=e.data)})}},{key:"listaSemestres",value:function(){var c=this;this.form.controls.semestre.setValue(""),this.selectedSemestre=null,this.semestreService.getAll().subscribe(function(e){c.semestres=null,200==e.status&&(c.semestres=e.data)})}},{key:"listaSedes",value:function(){var c=this;this.form.controls.sede.setValue(0),this.sedes=null,this.selectedSede=null,0!=this.form.controls.filial.value&&this.sedeService.getAll(this.selectedFilial.filialID).subscribe(function(e){c.sedes=null,200==e.status&&(c.sedes=e.data)},function(e){c.showNotification("snackbar-danger","Error en la conexion...!!!","bottom","center")})}},{key:"listaEspecialidades",value:function(){var c=this;this.form.controls.especialidad.setValue(0),this.form.controls.annoProceso.setValue(""),this.form.controls.mesProceso.setValue(""),this.form.controls.semestre.setValue(""),""+this.selectedArea.codigoArea=="04"||""+this.selectedArea.codigoArea=="05"?(this.selectedAreaStatus=2,this.form.get("annoProceso").setValidators([r.q.required]),this.form.get("mesProceso").setValidators([r.q.required]),this.form.get("semestre").setValidators(null)):(this.selectedAreaStatus=1,this.form.get("annoProceso").setValidators(null),this.form.get("mesProceso").setValidators(null),this.form.get("semestre").setValidators(r.q.required)),this.form.get("annoProceso").updateValueAndValidity(),this.form.get("mesProceso").updateValueAndValidity(),this.form.get("semestre").updateValueAndValidity(),this.selectedEspecialidad=null,this.especialidadService.getAll(this.selectedArea.codigoArea).subscribe(function(e){c.especialidades=null,200==e.status&&(c.especialidades=e.data)}),this.listaCiclos()}},{key:"formData",value:function(){var c=this.form.controls.filial.value;0==this.form.controls.filial.value&&(c=null);var e=this.form.controls.sede.value;0==this.form.controls.sede.value&&(e=null);var i=this.form.controls.especialidad.value;0==this.form.controls.especialidad.value&&(i=null);var t=this.form.controls.tipoAmbiente.value;0==this.form.controls.tipoAmbiente.value&&(t=null);var o=this.form.controls.ciclo.value;0==this.form.controls.ciclo.value&&(o=null);var a=this.form.controls.area.value,r=this.form.controls.semestre.value,n=this.form.controls.annoProceso.value,s=this.form.controls.mesProceso.value;return"04"==a.codigoArea||"05"==a.codigoArea?r=null:(n=null,s=null),{area:a,filial:c,sede:e,especialidad:i,semestre:r,annoProceso:n,mesProceso:s,tipoAmbiente:t,ciclo:o,id_login:this.idLogin}}},{key:"listaCiclos",value:function(){var c=this;this.form.controls.ciclo.setValue(0),this.selectedArea=null,this.asignacionManualService.getCiclos(this.formData()).subscribe(function(e){c.ciclos=null,200==e.status&&(c.ciclos=e.data)})}},{key:"loadData",value:function(){var c=this;this.isTblLoading=!0,this.data=null,this.dataSource=new n.k(this.data),this.migrarService.getAll().subscribe(function(e){console.log(e.data),c.data=e.data,c.dataSource=new n.k(c.data),c.dataSource.paginator=c.paginator,c.dataSource.sort=c.sort,c.isTblLoading=!1},function(e){c.isTblLoading=!1,c.data=null,c.dataSource=new n.k(c.data),c.dataSource.paginator=c.paginator,c.dataSource.sort=c.sort})}},{key:"loadDataReplica",value:function(){var c=this;this.isTblLoadingReplica=!0,this.data=null,this.dataSourceReplica=new n.k(this.data),this.migrarService.replicaGetAll().subscribe(function(e){c.data=e.data,c.dataSourceReplica=new n.k(c.data),c.dataSourceReplica.paginator=c.paginatorReplica,c.dataSourceReplica.sort=c.sortReplica,c.isTblLoadingReplica=!1},function(e){c.isTblLoadingReplica=!1,c.data=null,c.dataSourceReplica=new n.k(c.data),c.dataSourceReplica.paginator=c.paginatorReplica,c.dataSourceReplica.sort=c.sortReplica})}},{key:"refresh",value:function(){this.loadData()}},{key:"refreshReplica",value:function(){this.loadDataReplica()}},{key:"applyFilter",value:function(c){this.dataSource.filter=c.target.value.trim().toLowerCase()}},{key:"applyFilterReplica",value:function(c){this.dataSourceReplica.filter=c.target.value.trim().toLowerCase()}},{key:"procesarMigrar",value:function(){var c=this;this.procesando=!0,this.RegistrosProcesados="Procesando...";var e=this.formData();e.tipo=2,this.migrarService.Inconsistencias(e).subscribe(function(i){c.procesando=!1,200==i.status&&(console.log(i.data),i.data.length>0?(e.inconsistencias=i.data,c.RegistrosProcesados="Inconsistencias.",x.a.fire({icon:"error",title:"Se encontro Inconsistencias",showConfirmButton:!1,timer:2500}),c.excelService.generateExcelInconsistencias(e)):c.procesarMigracion(e))},function(e){c.RegistrosProcesados="Error interno.",c.procesando=!1,x.a.fire({icon:"error",title:"Ocurrio un Error en el Proceso",showConfirmButton:!1,timer:2500})})}},{key:"procesarSincronizar",value:function(){var c=this;this.procesando=!0,this.RegistrosProcesados="Procesando...";var e=this.formData();e.tipo=1,console.log(e),this.migrarService.migrar(e).subscribe(function(e){c.procesando=!1,200==e.status&&(console.log(e.data),1==e.data.status?(c.RegistrosProcesados="Proceso de sincronizar registrado. Este proceso puede tardar 30 min.",x.a.fire({icon:"success",title:"Proceso de sincronizar registrado",showConfirmButton:!1,timer:2500})):(c.RegistrosProcesados="Error al registrar la informacion.",x.a.fire({icon:"error",title:"Ocurrio un error al registrar la informacion",showConfirmButton:!1,timer:2500}))),c.refreshReplica()},function(e){c.procesando=!1,x.a.fire({icon:"error",title:"Ocurrio un Error en el Proceso",showConfirmButton:!1,timer:2500})})}},{key:"procesarMigracion",value:function(c){var e=this;this.procesando=!0,this.RegistrosProcesados="Procesando...",console.log(c),this.migrarService.migrar(c).subscribe(function(c){e.procesando=!1,200==c.status&&(console.log(c.data),1==c.data.status?(e.RegistrosProcesados="Proceso de migraci\xf3n registrado. Este proceso puede tardar 30 min.",x.a.fire({icon:"success",title:"Proceso de migraci\xf3n registrado",showConfirmButton:!1,timer:2500})):(e.RegistrosProcesados="Error al registrar la informacion.",x.a.fire({icon:"error",title:"Ocurrio un error al registrar la informacion",showConfirmButton:!1,timer:2500}))),e.refresh()},function(c){e.procesando=!1,x.a.fire({icon:"error",title:"Ocurrio un Error en el Proceso",showConfirmButton:!1,timer:2500})})}},{key:"validarExiste",value:function(c){var e=this;this.procesando=!0,this.RegistrosProcesados="Procesando...";var i=this.formData();i.tipo=c,console.log(i),this.migrarService.existe(i).subscribe(function(i){e.procesando=!1,200==i.status&&(console.log(i.data),1==i.data.status?0==i.data.out_id?1==c?e.procesarSincronizar():2==c&&e.procesarMigrar():(e.RegistrosProcesados="Proceso ejecutado, por favor esperar.",x.a.fire({icon:"success",title:"Proceso ejecutado, por favor esperar",showConfirmButton:!1,timer:2500})):(e.RegistrosProcesados="Error interno.",x.a.fire({icon:"error",title:"Ocurrio un error interno",showConfirmButton:!1,timer:2500}))),e.refresh()},function(c){e.procesando=!1,x.a.fire({icon:"error",title:"Ocurrio un Error interno",showConfirmButton:!1,timer:2500})})}}]),e}(),fe.\u0275fac=function(c){return new(c||fe)(w.ec(u.a),w.ec(R.a),w.ec(S.a),w.ec(E.a),w.ec(y.a),w.ec(Z.a),w.ec(D),w.ec(p.b),w.ec(r.d),w.ec(I.a),w.ec(X.a),w.ec(F.a),w.ec($.a))},fe.\u0275cmp=w.Yb({type:fe,selectors:[["app-migracion-lista"]],viewQuery:function(c,e){var i;1&c&&(w.dd(N,3),w.dd(L,1),w.dd(V,3),w.dd(B,1)),2&c&&(w.Lc(i=w.vc())&&(e.paginator=i.first),w.Lc(i=w.vc())&&(e.sort=i.first),w.Lc(i=w.vc())&&(e.paginatorReplica=i.first),w.Lc(i=w.vc())&&(e.sortReplica=i.first))},decls:217,vars:41,consts:[[1,"content"],[1,"container-fluid"],[1,"block-header"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"breadcrumb","breadcrumb-style"],[1,"breadcrumb-item"],[1,"page-title"],[1,"breadcrumb-item","bcrumb-1"],["routerLink","/admin/dashboard/main"],[1,"fas","fa-home"],[1,"breadcrumb-item","active"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"body"],["class","col-lg-12 col-xs-12",4,"ngIf"],[1,"register-form","m-4",3,"formGroup"],[1,"row",2,"font-size","12px"],[1,"col-xl-2","col-lg-3","col-md-4","col-sm-6","col-xs-12"],["appearance","outline",1,"example-full-width"],["formControlName","area",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-xl-2 col-lg-3 col-md-4 col-sm-6 col-xs-12",4,"ngIf"],["formControlName","filial",3,"value","valueChange","selectionChange"],["selected","",3,"value"],["formControlName","sede",3,"value","valueChange"],[1,"col-xl-4","col-lg-6","col-md-6","col-sm-6","col-xs-12"],["formControlName","especialidad",3,"value","valueChange","selectionChange"],["formControlName","tipoAmbiente"],[1,"col-xl-2","col-lg-3","col-md-4","col-sm-5","col-xs-12"],["formControlName","ciclo"],[1,"col-xl-6","col-lg-6","col-md-6","col-sm-12","col-xs-12"],["mat-raised-button","","color","primary","matTooltip","Migrar la tabla Intermedia de Simulaci\xf3n a Producci\xf3n (solo el campo UbicacionID)",1,"mr-3",3,"disabled","click"],[1,"col-white"],["mat-raised-button","","color","primary","matTooltip","Sincronizar de Producci\xf3n a la tabla Intermedia de Simulaci\xf3n (excepto el campo UbicacionID)",1,"mr-3",3,"disabled","click"],["class","col-lg-6 col-md-6 col-sm-12 col-xs-12","style","text-align: right;font-size: 18px",4,"ngIf"],[1,"body","table-responsive"],[1,"materialTableHeader"],[1,"col-8"],[1,"header-buttons-left","ml-0"],[1,"dropdown"],[1,"dropdown","m-l-20"],["for","search-input"],[1,"material-icons","search-icon"],["placeholder","Buscar","type","text","aria-label","Search box",1,"browser-default","search-field",3,"keyup"],[1,"col-4"],[1,"header-buttons"],[1,"icon-button-demo"],["mat-mini-fab","","color","primary","matTooltip","Actualizar",3,"click"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["sortTableSort","matSort"],["matColumnDef","simulacionID"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fecha_convert"],["matColumnDef","codigoArea"],["matColumnDef","nombreFilial"],["matColumnDef","codigoSede"],["matColumnDef","codigoEspecialidad"],["matColumnDef","codigoTipoAmbiente"],["matColumnDef","ciclo"],["matColumnDef","semestre"],["matColumnDef","annoProceso"],["matColumnDef","mesProceso"],["matColumnDef","estado"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","tbl-spinner",4,"ngIf"],["class","no-results",3,"display",4,"ngIf"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["paginator",""],["sortTableSortReplica","matSort"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],["paginatorReplica",""],[1,"col-lg-12","col-xs-12"],["mode","indeterminate"],[3,"value"],["formControlName","semestre",3,"value","valueChange","selectionChange"],["formControlName","annoProceso"],["formControlName","mesProceso"],[1,"col-lg-6","col-md-6","col-sm-12","col-xs-12",2,"text-align","right","font-size","18px"],[1,"label","bg-cyan","m-b-10"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf"],["mat-header-row",""],["mat-row","",3,"ngClass"],[1,"tbl-spinner"],["color","primary","mode","indeterminate",3,"diameter"],[1,"no-results"],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["mat-cell","",1,"actions-cell"]],template:function(c,e){1&c&&(w.kc(0,"section",0),w.kc(1,"div",1),w.kc(2,"div",2),w.kc(3,"div",3),w.kc(4,"div",4),w.kc(5,"ul",5),w.kc(6,"li",6),w.kc(7,"h4",7),w.Zc(8,"Migraci\xf3n"),w.jc(),w.jc(),w.kc(9,"li",8),w.kc(10,"a",9),w.fc(11,"i",10),w.Zc(12," Home"),w.jc(),w.jc(),w.kc(13,"li",11),w.Zc(14," Migraci\xf3n "),w.jc(),w.jc(),w.jc(),w.jc(),w.jc(),w.kc(15,"div",3),w.kc(16,"div",12),w.kc(17,"div",13),w.kc(18,"div",14),w.kc(19,"div",3),w.Xc(20,H,2,0,"div",15),w.jc(),w.kc(21,"form",16),w.kc(22,"div",17),w.kc(23,"div",18),w.kc(24,"mat-form-field",19),w.kc(25,"mat-label"),w.Zc(26,"Area"),w.jc(),w.kc(27,"mat-select",20),w.uc("valueChange",function(c){return e.selectedArea=c})("selectionChange",function(){return e.listaEspecialidades()}),w.Xc(28,U,2,2,"mat-option",21),w.jc(),w.jc(),w.jc(),w.Xc(29,G,6,2,"div",22),w.Xc(30,K,6,1,"div",22),w.Xc(31,J,6,1,"div",22),w.kc(32,"div",18),w.kc(33,"mat-form-field",19),w.kc(34,"mat-label"),w.Zc(35,"Filial"),w.jc(),w.kc(36,"mat-select",23),w.uc("valueChange",function(c){return e.selectedFilial=c})("selectionChange",function(){return e.listaSedes()}),w.kc(37,"mat-option",24),w.Zc(38,"Todos"),w.jc(),w.Xc(39,W,2,2,"mat-option",21),w.jc(),w.jc(),w.jc(),w.kc(40,"div",18),w.kc(41,"mat-form-field",19),w.kc(42,"mat-label"),w.Zc(43,"Sede"),w.jc(),w.kc(44,"mat-select",25),w.uc("valueChange",function(c){return e.selectedSede=c}),w.kc(45,"mat-option",24),w.Zc(46,"Todos"),w.jc(),w.Xc(47,Y,2,2,"mat-option",21),w.jc(),w.jc(),w.jc(),w.kc(48,"div",26),w.kc(49,"mat-form-field",19),w.kc(50,"mat-label"),w.Zc(51,"Especialidad"),w.jc(),w.kc(52,"mat-select",27),w.uc("valueChange",function(c){return e.selectedEspecialidad=c})("selectionChange",function(){return e.listaCiclos()}),w.kc(53,"mat-option",24),w.Zc(54,"Todos"),w.jc(),w.Xc(55,cc,2,2,"mat-option",21),w.jc(),w.jc(),w.jc(),w.kc(56,"div",18),w.kc(57,"mat-form-field",19),w.kc(58,"mat-label"),w.Zc(59,"Tipo de Ambiente"),w.jc(),w.kc(60,"mat-select",28),w.kc(61,"mat-option",24),w.Zc(62,"Todos"),w.jc(),w.Xc(63,ec,2,2,"mat-option",21),w.jc(),w.jc(),w.jc(),w.kc(64,"div",29),w.kc(65,"mat-form-field",19),w.kc(66,"mat-label"),w.Zc(67,"Ciclo"),w.jc(),w.kc(68,"mat-select",30),w.kc(69,"mat-option",24),w.Zc(70,"Todos"),w.jc(),w.Xc(71,ic,2,2,"mat-option",21),w.jc(),w.jc(),w.jc(),w.jc(),w.kc(72,"div",17),w.kc(73,"div",31),w.kc(74,"button",32),w.uc("click",function(){return e.validarExiste(2)}),w.kc(75,"mat-icon",33),w.Zc(76,"autorenew "),w.jc(),w.Zc(77," Migrar "),w.jc(),w.kc(78,"button",34),w.uc("click",function(){return e.validarExiste(1)}),w.kc(79,"mat-icon",33),w.Zc(80,"content_copy "),w.jc(),w.Zc(81," Sincronizar "),w.jc(),w.jc(),w.Xc(82,tc,3,1,"div",35),w.jc(),w.jc(),w.kc(83,"div",36),w.kc(84,"div",37),w.kc(85,"div",3),w.kc(86,"div",38),w.kc(87,"ul",39),w.kc(88,"li",40),w.kc(89,"h2"),w.kc(90,"strong"),w.Zc(91,"Migraciones a Produccion"),w.jc(),w.jc(),w.jc(),w.kc(92,"li",41),w.kc(93,"label",42),w.kc(94,"i",43),w.Zc(95,"search"),w.jc(),w.jc(),w.kc(96,"input",44),w.uc("keyup",function(c){return e.applyFilter(c)}),w.jc(),w.jc(),w.jc(),w.jc(),w.kc(97,"div",45),w.kc(98,"ul",46),w.kc(99,"li"),w.kc(100,"div",47),w.kc(101,"button",48),w.uc("click",function(){return e.refresh()}),w.kc(102,"mat-icon",33),w.Zc(103,"refresh "),w.jc(),w.jc(),w.jc(),w.jc(),w.jc(),w.jc(),w.jc(),w.jc(),w.kc(104,"table",49,50),w.ic(106,51),w.Xc(107,oc,2,0,"th",52),w.Xc(108,ac,2,1,"td",53),w.hc(),w.ic(109,54),w.Xc(110,rc,2,0,"th",52),w.Xc(111,nc,5,5,"td",53),w.hc(),w.ic(112,55),w.Xc(113,sc,2,0,"th",52),w.Xc(114,lc,2,1,"td",53),w.hc(),w.ic(115,56),w.Xc(116,dc,2,0,"th",52),w.Xc(117,uc,2,1,"td",53),w.hc(),w.ic(118,57),w.Xc(119,mc,2,0,"th",52),w.Xc(120,fc,2,1,"td",53),w.hc(),w.ic(121,58),w.Xc(122,hc,2,0,"th",52),w.Xc(123,pc,2,1,"td",53),w.hc(),w.ic(124,59),w.Xc(125,bc,2,0,"th",52),w.Xc(126,vc,2,1,"td",53),w.hc(),w.ic(127,60),w.Xc(128,gc,2,0,"th",52),w.Xc(129,kc,2,1,"td",53),w.hc(),w.ic(130,61),w.Xc(131,jc,2,0,"th",52),w.Xc(132,Rc,2,1,"td",53),w.hc(),w.ic(133,62),w.Xc(134,Sc,2,0,"th",52),w.Xc(135,Ec,2,1,"td",53),w.hc(),w.ic(136,63),w.Xc(137,Zc,2,0,"th",52),w.Xc(138,yc,2,1,"td",53),w.hc(),w.ic(139,64),w.Xc(140,Cc,2,0,"th",52),w.Xc(141,wc,3,2,"td",53),w.hc(),w.Xc(142,Pc,1,0,"tr",65),w.Xc(143,Ic,1,3,"tr",66),w.jc(),w.Xc(144,Tc,2,1,"div",67),w.jc(),w.Xc(145,xc,2,2,"div",68),w.fc(146,"mat-paginator",69,70),w.jc(),w.kc(148,"div",14),w.kc(149,"div",36),w.kc(150,"div",37),w.kc(151,"div",3),w.kc(152,"div",38),w.kc(153,"ul",39),w.kc(154,"li",40),w.kc(155,"h2"),w.kc(156,"strong"),w.Zc(157,"Sincronizacion"),w.jc(),w.jc(),w.jc(),w.kc(158,"li",41),w.kc(159,"label",42),w.kc(160,"i",43),w.Zc(161,"search"),w.jc(),w.jc(),w.kc(162,"input",44),w.uc("keyup",function(c){return e.applyFilterReplica(c)}),w.jc(),w.jc(),w.jc(),w.jc(),w.kc(163,"div",45),w.kc(164,"ul",46),w.kc(165,"li"),w.kc(166,"div",47),w.kc(167,"button",48),w.uc("click",function(){return e.refreshReplica()}),w.kc(168,"mat-icon",33),w.Zc(169,"refresh "),w.jc(),w.jc(),w.jc(),w.jc(),w.jc(),w.jc(),w.jc(),w.jc(),w.kc(170,"table",49,71),w.ic(172,51),w.Xc(173,Fc,2,0,"th",52),w.Xc(174,$c,2,1,"td",53),w.hc(),w.ic(175,54),w.Xc(176,Oc,2,0,"th",52),w.Xc(177,Mc,5,5,"td",53),w.hc(),w.ic(178,55),w.Xc(179,zc,2,0,"th",52),w.Xc(180,Nc,2,1,"td",53),w.hc(),w.ic(181,56),w.Xc(182,Lc,2,0,"th",52),w.Xc(183,Vc,2,1,"td",53),w.hc(),w.ic(184,57),w.Xc(185,Bc,2,0,"th",52),w.Xc(186,Hc,2,1,"td",53),w.hc(),w.ic(187,58),w.Xc(188,Uc,2,0,"th",52),w.Xc(189,qc,2,1,"td",53),w.hc(),w.ic(190,59),w.Xc(191,Gc,2,0,"th",52),w.Xc(192,_c,2,1,"td",53),w.hc(),w.ic(193,60),w.Xc(194,Kc,2,0,"th",52),w.Xc(195,Qc,2,1,"td",53),w.hc(),w.ic(196,61),w.Xc(197,Jc,2,0,"th",52),w.Xc(198,Wc,2,1,"td",53),w.hc(),w.ic(199,62),w.Xc(200,Yc,2,0,"th",52),w.Xc(201,ce,2,1,"td",53),w.hc(),w.ic(202,63),w.Xc(203,ee,2,0,"th",52),w.Xc(204,ie,2,1,"td",53),w.hc(),w.ic(205,64),w.Xc(206,te,2,0,"th",52),w.Xc(207,re,3,2,"td",53),w.hc(),w.ic(208,72),w.Xc(209,ne,2,0,"th",73),w.Xc(210,se,1,0,"td",74),w.hc(),w.Xc(211,le,1,0,"tr",65),w.Xc(212,de,1,3,"tr",66),w.jc(),w.Xc(213,ue,2,1,"div",67),w.jc(),w.Xc(214,me,2,2,"div",68),w.fc(215,"mat-paginator",69,75),w.jc(),w.jc(),w.jc(),w.jc(),w.jc(),w.jc()),2&c&&(w.Rb(20),w.Ec("ngIf",e.procesando),w.Rb(1),w.Ec("formGroup",e.form),w.Rb(6),w.Ec("value",e.selectedArea),w.Rb(1),w.Ec("ngForOf",e.areas),w.Rb(1),w.Ec("ngIf",1==e.selectedAreaStatus),w.Rb(1),w.Ec("ngIf",2==e.selectedAreaStatus),w.Rb(1),w.Ec("ngIf",2==e.selectedAreaStatus),w.Rb(5),w.Ec("value",e.selectedFilial),w.Rb(1),w.Ec("value",0),w.Rb(2),w.Ec("ngForOf",e.filiales),w.Rb(5),w.Ec("value",e.selectedSede),w.Rb(1),w.Ec("value",0),w.Rb(2),w.Ec("ngForOf",e.sedes),w.Rb(5),w.Ec("value",e.selectedEspecialidad),w.Rb(1),w.Ec("value",0),w.Rb(2),w.Ec("ngForOf",e.especialidades),w.Rb(6),w.Ec("value",0),w.Rb(2),w.Ec("ngForOf",e.tiposAmbiente),w.Rb(6),w.Ec("value",0),w.Rb(2),w.Ec("ngForOf",e.ciclos),w.Rb(3),w.Ec("disabled",!e.form.valid||e.procesando),w.Rb(4),w.Ec("disabled",!e.form.valid||e.procesando),w.Rb(4),w.Ec("ngIf",e.RegistrosProcesados),w.Rb(22),w.Ec("dataSource",e.dataSource),w.Rb(38),w.Ec("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),w.Rb(1),w.Ec("matRowDefColumns",e.displayedColumns),w.Rb(1),w.Ec("ngIf",e.isTblLoading),w.Rb(1),w.Ec("ngIf",!e.isTblLoading),w.Rb(1),w.Ec("pageSizeOptions",w.Hc(39,be))("pageSize",5),w.Rb(24),w.Ec("dataSource",e.dataSourceReplica),w.Rb(41),w.Ec("matHeaderRowDef",e.displayedColumnsReplica)("matHeaderRowDefSticky",!0),w.Rb(1),w.Ec("matRowDefColumns",e.displayedColumnsReplica),w.Rb(1),w.Ec("ngIf",e.isTblLoadingReplica),w.Rb(1),w.Ec("ngIf",!e.isTblLoadingReplica),w.Rb(1),w.Ec("pageSizeOptions",w.Hc(40,be))("pageSize",5))},directives:[j.g,a.m,r.r,r.l,r.f,l.c,l.f,h.a,r.k,r.e,a.l,O.n,m.a,k.a,f.a,n.j,b.a,n.c,n.e,n.b,n.g,n.i,s.a,M.a,n.d,b.b,n.a,n.f,n.h,a.k,z.a],pipes:[a.e],styles:[""]}),fe),pathMatch:"full"}],ge=((he=function e(){c(this,e)}).\u0275fac=function(c){return new(c||he)},he.\u0275mod=w.cc({type:he}),he.\u0275inj=w.bc({imports:[[j.h.forChild(ve)],j.h]}),he),ke=o("mklz"),je=o("wZkO"),Re=o("1jcm"),Se=o("bSwM"),Ee=o("MutI"),Ze=o("z17N"),ye=((pe=function e(){c(this,e)}).\u0275fac=function(c){return new(c||pe)},pe.\u0275mod=w.cc({type:pe}),pe.\u0275inj=w.bc({providers:[y.a,R.a,S.a,E.a,Z.a,D,I.a,ke.a,F.a,$.a,X.a,a.e],imports:[[a.c,r.g,r.o,n.l,s.b,l.e,d.c,u.b,m.b,f.b,h.b,p.e,b.c,v.a,g.c,k.b,ge,M.b,je.c,Re.b,Se.b,Ze.b,Ze.c,z.b,Ee.a]]}),pe)}}])}();